{% extends 'base.html.twig' %}

{% block title %}
	{{'contact.listes_contact'| trans}}
{% endblock %}
{% block sous_title %}
<a class="navbar-brand" href="{{ path('contact_index') }}">
	<img src="{{ asset('images/amdie.png') }}" width="30" height="30" class="d-inline-block align-top"
		alt="logo">
		<div class="SousTitre">
		<strong>AMDIE</strong>
	|
	{{'contact.Contacts'| trans | upper }}
	</div>
</a>
{% endblock %}
{% block stylesheets %}
	<link href="{{ asset('css/_style.css') }}" rel="stylesheet" type="text/css">
{% endblock %}
{% block navbar_right %}
	<a class="btn btn-blue" id="save_submit" href="#">
		<i class="fa fa-save"></i> Valider
	</a>
{% endblock %}
{% block navbar_left %}
	<a class="btn btn-blue" href="{{ app.request.headers.get('referer') }}">
		<i class="fa fa-arrow-left"></i>
	</a>
{% endblock %}
{% block body %}
<div class="item-details wrape-contact-details">
	<div class="item-details-body item-details-event item-bg-none">


		<div class="item-details-body item-details-contact item-bg-none event-details">

			{{ form_start(form,{'attr':{'id':'form_contact'}}) }}

			{% set i = 1 %}
				{% for contact in form.contacts %}
					<div id="parent_div_contact{{ i }}">
						<div style="margin: 20px"></div>
						<div class="item-details">
							<div class="row">
								<div class="col-md-8 content-info">
									<div class="header">
										<ul>
											<li class="active title-btn">
												Informations primaires
											</li>
												<button class="btn btn-danger remove-row" data-button="{{ i }}">Supprimer</button>
										</ul>
									</div>
									<div class="item-details">

										<div class="item-details-body item-details-contact item-bg-none">

											<div class="tab-content cs-tab-content">
												<div class="tab-pane fade show active" id="item-details-project" role="tabpanel">
													<div class="row align-items-end mb-4">


														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Prénom</label>
																{{ form_widget(contact.prenom) }}
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Nom</label>
																{{ form_widget(contact.nom) }}
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Email</label>
																{{ form_widget(contact.email) }}
															</div>
														</div>
													</div>

												</div>

												<div class="tab-pane fade show active" id="item-details-project" role="tabpanel">
													<div class="row align-items-end mb-4">
														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Tél</label>
																{{ form_widget(contact.tel) }}
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Canal</label>
																{{ form_widget(contact.canal) }}
															</div>
														</div>

														<div class="col-md-4">
															 <div class="form-group mb-2 d-flex justify-content-between align-items-center">
														<label class="cs-label mb-0">Exclusif</label>
														{{ form_widget(contact.exclusif, {label:false,label_attr: {class: 'switch-custom'} }) }}
													</div>
														</div>
													</div>

												</div>
												<div class="tab-pane fade show active" id="item-details-project" role="tabpanel">
													<div class="row align-items-end mb-4">
													<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Langue principale</label>
																{{ form_widget(contact.langugePrincipale) }}
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Langue secondaire</label>
																{{ form_widget(contact.langueSecondaire) }}
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Profil</label>
																{{ form_widget(contact.profil) }}
															</div>
														</div>
													</div>

												</div>
												<div class="tab-pane fade show active" id="item-details-project" role="tabpanel">
													<div class="row align-items-end mb-4">
													
														{# <div class="col-md-4">
															<div class="form-group mb-0">
																<label class="cs-label">Organisation</label>
																 {{ form_widget(contact.organisation) }}
															</div>
														</div> #}
														 <div class="col-lg-4">
                                            				<div class="form-group mb-0">
                                                			<label class="cs-label">Fonction</label>
                                                			{{ form_widget(contact.fonction) }}
                                            				</div>
                                        				</div>
														<div class="col-md-4" style="display:none">
															<div class="form-group mb-0">
																<label class="cs-label">Géré par</label>
																 {{ form_widget(contact.responsableContact) }}
															</div>
														</div>
													</div>

												</div>

											</div>

										</div>
									</div>

								</div>
								<div class="col-md-4 sidbar-compte">
									{# <div class="container">
								<div class="row"> #}
									<div class="comment  ">
										<div class="header">
											<ul >
												<li class="active title-btn">
													Commentaire
												</li>
											</ul>
										</div>
										<div class="container">
											<div class="form-group mb-4">
												<label class="cs-label">Détails libres</label>
												{# <textarea rows="5" class="form-control" placeholder="Lorem ipsum"></textarea> #}
												{{ form_widget(contact.detailsLibres,{attr: {rows: '6'} }) }}
											</div>
										</div>
										{#  </div>
								</div> #}
									</div>
								</div> <!-- End Sidebar compte -->
							</div> <!-- End first Row Contacte -->
						</div>
						<div style="margin: 20px"></div>
					</div>
					{% set i = i + 1 %}
				{% endfor %}

			{{ form_end(form) }}


		</div>
	</div>
</div>

<script>

	//$("#projet_data_Confidentiel,#projet_data_Prioritaire").css("display","none");
	$(".remove-row").click(function (e){
		e.preventDefault();
		var key_button = $(this).data('button');
        $("#parent_div_contact"+key_button).remove();
	});
	$("#save_submit").click(function (e){
		e.preventDefault();
		$("#form_contact").submit();
	});

</script>
{% for message in app.flashes('notice') %}
<script>
	Swal.fire({
		position: 'top-end',
		icon: 'success',
		title: 'vos changements ont été bien enregistrés.',
		showConfirmButton: false,
		timer: 3000
	})
</script>


{% endfor %}
{% endblock %}
